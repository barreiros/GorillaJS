<meta charset="UTF-8"><p align="center">
  <a href="https://camo.githubusercontent.com/286b1772fd35d404be6265da606a99e1b4e09f62/687474703a2f2f7332332e706f7374696d672e6f72672f6b6135666e6b7732332f6c6f676f5f6d696e692e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/286b1772fd35d404be6265da606a99e1b4e09f62/687474703a2f2f7332332e706f7374696d672e6f72672f6b6135666e6b7732332f6c6f676f5f6d696e692e6a7067" alt="GorillaJS logo" data-canonical-src="http://s23.postimg.org/ka5fnkw23/logo_mini.jpg" style="max-width:100%;"></a>
</p>

<p><strong>GorillaJS es una herramienta basada en Docker que simplifica la creación de entornos de desarrollo web</strong></p>

<h3>
<a id="user-content-objetivo-y-filosofía" class="anchor" href="#objetivo-y-filosof%C3%ADa" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Objetivo y filosofía</h3>

<p>GorillaJS pretende servir de apoyo a los desarrolladores web ahorrándoles tiempo en la ejecución de tareas repetitivas, como podrían ser la configuración e instalación de aplicaciones, la creación de bases de datos o la réplica del proyecto en otras máquinas.<br>
Para conseguir esto, GorillaJS utiliza un sistema simple de preguntas y respuesta que va almacenando en el archivo .gorilla/gorillafile y que después utiliza para configurar el proyecto.   </p>

<blockquote>
<p>Es importante saber que, aunque GorillaJS se base en Docker y Nodejs, no es necesario tener ningún conocimiento en estas tecnologías, más allá de la simple instalación de ambas.</p>
</blockquote>

<p align="center">
    <a href="http://www.youtube.com/watch?feature=player_embedded&amp;v=jS3oq_xmlSo">
        <img src="https://camo.githubusercontent.com/e8da5dec6185cdec2252d0e8d4349f9f727e2a93/687474703a2f2f696d672e796f75747562652e636f6d2f76692f6a53336f715f786d6c536f2f302e6a7067" alt="How to install Wordpress in 80 seconds" width="50%" height="auto" border="3" data-canonical-src="http://img.youtube.com/vi/jS3oq_xmlSo/0.jpg" style="max-width:100%;">
    </a>
</p>

<p>En este ejemplo GorillaJS usa la <a href="#templates">plantilla predefinida de Wordpress</a> para:</p>

<ul>
<li>iniciar los contenedores de Docker</li>
<li>instalar el entorno LAMP</li>
<li>crear y configurar la base de datos</li>
<li>descargar los archivos del repositorio oficial de Wordpress</li>
<li>instalar Wordpress</li>
<li>configurar el archivo hosts del ordenador</li>
<li>abrir el navegador con la url del proyecto.</li>
</ul>

<p>Todo esto lo consigue con un solo comando y en menos de 2 minutos.</p>

<hr>

<h5>
<a id="user-content-instalación" class="anchor" href="#instalaci%C3%B3n" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Instalación</h5>

<p>GorillaJS se instala desde <a href="https://docs.npmjs.com/getting-started/installing-node">npm</a> y necesita Docker y Docker Compose (<a href="https://docs.docker.com/docker-for-mac/">MAC</a>, <a href="https://docs.docker.com/engine/installation/linux/">Linux</a>, <a href="https://docs.docker.com/docker-for-windows/">Windows</a>) para funcionar.</p>

<pre lang="nodejs"><code>npm install -g gorillajs
</code></pre>

<h5>
<a id="user-content-cómo-se-usa" class="anchor" href="#c%C3%B3mo-se-usa" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cómo se usa</h5>

<p>Para usar GorillaJS simplemente hay que iniciarlo desde la consola, con el comando <em>init</em></p>

<pre lang="nodejs"><code>gorilla init [path]
</code></pre>

<p>El path es opcional y si no se indica se crea el proyecto en la ruta actual. </p>

<h5>
<a id="user-content-parámetros" class="anchor" href="#par%C3%A1metros" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Parámetros</h5>

<p>-v | Enable verbose mode<br>
-f | Ask you again</p>

<h3>
<a id="user-content-plantillas-por-defecto" class="anchor" href="#plantillas-por-defecto" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plantillas por defecto</h3>

<p>Por defecto GorillaJS viene con una plantilla para crear proyectos de Wordpress. Para poder usar esta plantilla es necesario aportar los siguientes valores:</p>

<ul>
<li><p><strong>Select the docker template value from the list above</strong><br>
Por ahora solo se puede elegir entre wordpress o una <a href="#user-content-plantillas-personalizadas">plantilla personalizada</a>.</p></li>
<li><p><strong>Tell me a name for your project</strong><br>
Un nombre identificativo para el proyecto. Algo corto.</p></li>
<li>
<p><strong>How do you prefer to access your site, through domain name or ip?</strong><br>
Con GorillaJS se puede elegir cómo acceder al sitio del proyecto. Si se selecciona <em>domain</em>, aparecen además estos otros valores:</p>

<ul>
<li><p><strong>Tell me your local project url</strong><br>
El nombre de dominio a través del cual se quiere acceder al site. Hay que poner solo el nombre: sin http://, ni https://.</p></li>
<li><p><strong>Enter the system hostsfile value</strong><br>
La ruta absoluta del archivo hosts del ordenador desde el que se está ejecutando GorillaJS. Para más información sobre <a href="https://en.wikipedia.org/wiki/Hosts_file%20la%20ruta%20del%20archivo%20hosts">dónde encontrar</a>.</p></li>
</ul>
</li>
<li><p><strong>What is your public folder?</strong><br>
La carpeta pública en la que irán los archivos de Wordpress. Si ya existe una carpeta con los archivos, GorillaJS no la sobreescribe: usa esa misma carpeta, respetando los contenidos.</p></li>
<li><p><strong>The data base name</strong></p></li>
<li><p><strong>The data base user name</strong></p></li>
<li><p><strong>The data base password</strong><br>
Es muy importante saber que si ya existe un proyecto de Wordpress previo, como GorillaJS no sobreescribe los archivos, la configuración de estos tres últimos valores tiene que seguir igual que la del archivo wp-config, y en este archivo es necesario cambiar el valor de la constante DB_HOST a <em>mysql</em>.</p></li>
<li><p><strong>Where do you want to store the data base files</strong><br>
Docker necesita una carpeta en la que guardar los datos de la base de datos porque, por naturaleza, los borra cada vez que se apaga el contenedor. Esta carpeta se usa para salvar esos datos y no perderlos. Es uno de los dos <a href="https://docs.docker.com/engine/tutorials/dockervolumes/"><em>volumes</em></a> que usa esta plantilla. El otro es la carpeta pública en la que van los archivos de Wordpress.</p></li>
</ul>

<h3>
<a id="user-content-plantillas-personalizadas" class="anchor" href="#plantillas-personalizadas" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plantillas personalizadas</h3>

<p><strong><em>Esta parte solo es para los usuarios que quieran hacer una plantilla personalizada, y requiere conocimientos avanzados de Docker.</em></strong>  </p>

<p>Además de las plantillas que trae por defecto, GorillaJS permite crear plantillas personalizadas. El único requisito para crear una plantilla es que ésta debe tener un archivo <em>docker-compose.yml</em>. <a href="https://docs.docker.com/compose/">Aquí hay más información sobre Docker Compose</a>.
Por ejemplo, la plantilla de Wordpress, que está en .../templates/wordpress/ utiliza varios archivos a lo largo del proceso de configuración. </p>

<ul>
<li>apache-httpd.conf | Se usa una vez iniciados los contenedores, para sobreescribir la configuración por defecto de Apache.</li>
<li>apache-init.conf | Se usa al iniciar Apache y se encarga de descargar Wordpress del repositorio oficial y de instalarlo a través de WP-CLI. También se encarga de configurar el archivo wp-config y de renombrar el dominio, si fuera necesario.</li>
<li>apache-vhost.conf | Se usa para crear el virtualhost dentro del contenedor de Apache.</li>
<li>docker-compose.yml |  Generar los contenedores de Docker (Apache y MySQL) y los volúmenes en los que va la aplicación y los datos persistentes de mysql.</li>
<li>gorillafile | Se usa para pasarle a GorillaJS valores de configuración iniciales de plantilla. <a href="#user-content-archivo-gorillafile">Más información</a>.</li>
<li>messages | Se usar para indicarle a GorillaJS qué debe preguntar para conseguir un valor. <a href="#user-content-archivo-messages">Más información</a>.</li>
<li>mysql-debian.cnf, mysql-init.conf | Son archivos de configuración de mysql, como Apache.</li>
<li>php-php5-fpm.conf | Configuración inicial de php-fpm.</li>
<li>waiting.html | Se usa en lugar del index.html que viene por defecto en Apache.</li>
</ul>

<p>Estos archivos están en la plantilla porque, de alguna manera, se encargan de la configuración de una parte del proyecto que no puede ser igual a la de otro proyecto. Por ejemplo, el virtualhost de Apache: </p>

<div class="highlight highlight-source-shell"><pre>
<span class="pl-k">&lt;</span>VirtualHost <span class="pl-k">*</span>:<span class="pl-k">80&gt;</span>

    Servername {{project.domain}}

    DocumentRoot /var/www/{{project.domain}}/{{project.srcout}}

    ErrorLog /var/log/apache2/{{project.domain}}-error.log
    CustomLog /var/log/apache2/{{project.domain}}-access.log combined

    <span class="pl-k">&lt;</span>Directory /var/www/{{project.domain}}/{{project.srcout}}<span class="pl-k">&gt;</span>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    <span class="pl-k">&lt;</span>/Directory<span class="pl-k">&gt;</span>

<span class="pl-k">&lt;</span>/VirtualHost<span class="pl-k">&gt;</span>
</pre></div>

<p>En este archivo los valores de ServerName, DocumentRoot, etc... tienen que ser únicos, por razones obvias. De otra manera, si se quisiera acceder al proyecto a través del nombre de dominio, y las configuraciones no fuera únicas, el host no sabría qué proyecto mostrar. Esto, como ya se ha dicho antes, es opcional; pues en este ejemplo en concreto se podría acceder a través de ip y dejar la configuración por defecto de Apache.  </p>

<p>Para que GorillaJS pueda reconocer las variables que hay en la plantilla se usa un marcado específico:</p>

<div class="highlight highlight-source-shell"><pre>{{NOMBRE_DE_LA_VARIABLE}}  </pre></div>

<p>También se puede agrupar usando el marcado:</p>

<div class="highlight highlight-source-shell"><pre>{{NOMBRE_DEL_GRUPO.NOMBRE_DE_LA_VARIABLE}}</pre></div>

<p>GorillaJS solo reconoce hasta un segundo nivel de profundidad. El siguiente ejemplo no será válido:</p>

<div class="highlight highlight-source-shell"><pre>{{NOMBRE_DEL_GRUPO.NOMBRE_DE_LA_VARIABLE.NOMBRE_DE_OTRA_VARIABLE}}
</pre></div>

<p>Todos estos valores son reemplazados por GorillaJS cada vez que se ejecuta el comando:</p>

<div class="highlight highlight-source-shell"><pre>gorilla init</pre></div>

<h4>
<a id="user-content-archivo-gorillafile" class="anchor" href="#archivo-gorillafile" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Archivo gorillafile</h4>

<p>La plantilla puede traer un archivo gorillafile por defecto. Los valores que se pongan en este archivo se complementarán con los generados por el sistema de preguntas y respuestas.<br>
Siguiendo con el ejemplo de la plantilla de Wordpress, el archivo gorillafile que se genera a través de esa plantilla sería algo así:</p>

<div class="highlight highlight-source-shell"><pre>
<span class="pl-s"><span class="pl-pds">"</span>local<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>docker<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>gorillafolder<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>.gorilla<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>templatefolder<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>template<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>template<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>wordpress<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: 4815
    },
    <span class="pl-s"><span class="pl-pds">"</span>project<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>slug<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>veryease<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>domain<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>veriease.local<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>srcout<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>application<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>datafolder<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>application-db<span class="pl-pds">"</span></span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>apache<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>adminemail<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>test@yourdomain.com<span class="pl-pds">"</span></span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>database<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>dbname<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>veryeasedb<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>veryeaseuser<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>1234<span class="pl-pds">"</span></span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>enabled<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>domain<span class="pl-pds">"</span></span>
    }
}
</pre></div>

<blockquote>
<p>Al estar en formato json, se pueden cambiar los valores del fichero, guardar y volver a ejecutar gorilla init para cambiar la configuración del proyecto.</p>
</blockquote>

<p>El archivo gorillafile puede servir para dos propósitos:</p>

<ul>
<li>Sugerir valores por defecto a las preguntas que se le muestran al usuario.</li>
<li>Asignar un valor predeterminado a una variable y evitar que se le pregunte al usuario por ella (esto será así mientras el usuario no ejecute gorilla con la opción -f).</li>
</ul>

<p><strong>Sugerir valores</strong>
Para sugerir valores, éstos tienen que ir en un árbol que empieze con el valor <em>default</em>. Por ejemplo:</p>

<div class="highlight highlight-source-shell"><pre>
<span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>database<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>application-db<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>gorilla.local<span class="pl-pds">"</span></span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>system<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>hostsfile<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>/etc/hosts<span class="pl-pds">"</span></span>
    },
    ...
</pre></div>

<p><strong>Asignar valores</strong>
Para asignar valores, éstos tienen que ir en un árbol que empieze con el valor <em>local</em>. Por ejemplo:</p>

<div class="highlight highlight-source-shell"><pre>
<span class="pl-s"><span class="pl-pds">"</span>local<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>project<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>datafolder<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>application-db<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>domain<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>gorilla.local<span class="pl-pds">"</span></span>
    },
    ...
</pre></div>

<p>De esta manera, se podría crear un archivo gorillafile en la plantilla que fuera algo así:</p>

<div class="highlight highlight-source-shell"><pre>
{
    <span class="pl-s"><span class="pl-pds">"</span>local<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>project<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>datafolder<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>application-db<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>domain<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>gorilla.local<span class="pl-pds">"</span></span>
        }
    },
    <span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>database<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>application-db<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>gorilla.local<span class="pl-pds">"</span></span>
        },
        <span class="pl-s"><span class="pl-pds">"</span>system<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>hostsfile<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>/etc/hosts<span class="pl-pds">"</span></span>
        }
    }
}
</pre></div>

<p>Por lo que si hay un archivo en la plantilla con las variables {{database.name}} GorillaJS le sugerirá al usuario que use el valor <em>application-db</em>, mientras que si en la plantilla hay una variable {{project.domain}}, GorillaJS no le preguntará nada al usuario y rellenará ese varaible con el valor <em>gorilla.local</em>, a menos que el usuario haya ejecutado gorilla init -f, en cuyo caso solo le sugerirá usar el valor <em>gorilla-local</em>.</p>

<h4>
<a id="user-content-archivo-messages" class="anchor" href="#archivo-messages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Archivo messages</h4>

<p>También se puede personalizar el texto de la pregunta que GorillaJS le muestra al usuario. Para hacer esto se usa el archivo <em>messages</em> que, al igual que el archivo gorillafile, está en formato json.<br>
Un ejemplo de archivo message sería este:</p>

<div class="highlight highlight-source-shell"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>questions<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>database<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Please, enter the data base name. Just letters and numbers, no special characters<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Please, enter the user data base<span class="pl-pds">"</span></span>
        }
    }
}
</pre></div>

<p>Esta vez el árbol tiene que empezar con el valor "questions", seguido de la ruta a las variables a las que se le quiere cambiar la pregunta. Si no hay ninguna pregunta, el formato será el que viene por defecto en GorillaJS: </p>

<div class="highlight highlight-source-shell"><pre>Please, enter the NOMBRE_DEL_GRUPO NOMBRE_DE_LA_VARIALBE value.</pre></div>
